<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Setting up local and secure LibreTranslate and use it with Open WebUI</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Setting up local and secure LibreTranslate and use it with Open WebUI</h1>
</header>
<section data-field="subtitle" class="p-summary">
LibreTranslate is an open-source, lightweight, and self-hosted machine translation tool that allows users to translate text between…
</section>
<section data-field="body" class="e-content">
<section name="e9e3" class="section section--body section--first"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="b1c5" id="b1c5" class="graf graf--h3 graf--leading graf--title">Setting up local and secure LibreTranslate and use it with Open WebUI</h3><p name="fe63" id="fe63" class="graf graf--p graf-after--h3"><a href="https://libretranslate.com/" data-href="https://libretranslate.com/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">LibreTranslate</a> is an open-source, lightweight, and self-hosted machine translation tool that allows users to translate text between multiple languages. Unlike many other translation services, it doesn’t rely on proprietary APIs or external servers, giving users complete control over their data. LibreTranslate supports a variety of languages and can be integrated into applications or websites via its easy-to-use API. Its open-source nature and flexibility make it a popular choice for developers, researchers, and anyone looking for a customizable translation solution that can run locally or on private infrastructure. LibreTranslate uses <a href="https://www.argosopentech.com/" data-href="https://www.argosopentech.com/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Argos Translate</a>, an open-source neural machine translation engine, to perform translations.</p><p name="5482" id="5482" class="graf graf--p graf-after--p graf--trailing">In this article, I walk through how to install LibreTranslate on Linux Mint (Ubuntu) and enable translation in <a href="https://openwebui.com/" data-href="https://openwebui.com/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">OpenWebUI</a> for LLM model response translations.</p></div></div></section><section name="4af4" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="4dec" id="4dec" class="graf graf--p graf--leading">First you need to select installation path and install Python virtual environment (Python 3.8+) and then install cmake:</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="bash" name="5908" id="5908" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">sudo <span class="hljs-built_in">mkdir</span> /opt/libre<br />sudo <span class="hljs-built_in">chown</span> youruser:yourgroup /opt/libre<br /><span class="hljs-built_in">cd</span> /opt/libre<br />python3 -m venv venv<br /><span class="hljs-built_in">source</span> venv/bin/activate</span></pre><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="csharp" name="b41f" id="b41f" class="graf graf--pre graf-after--pre graf--preV2"><span class="pre--content">sudo apt-<span class="hljs-keyword">get</span> install cmake</span></pre><p name="f126" id="f126" class="graf graf--p graf-after--pre">Make sure your virtual environment is enabled. Then execute installation:</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="typescript" name="ec3b" id="ec3b" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">pip install libretranslate</span></pre><p name="5a1c" id="5a1c" class="graf graf--p graf-after--pre">Wait for the installation to complete:</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="csharp" name="3b08" id="3b08" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">Successfully built sentencepiece<br />Installing collected packages: sentencepiece, pytz, polib, mpmath, morfessor, lexilang, expiringdict, commonmark, appdirs, wrapt, waitress, urllib3, tzlocal, typing-extensions, tqdm, sympy, soupsieve, six, setuptools, regex, PyYAML, pygments, protobuf, prometheus-client, packaging, nvidia-nvtx-cu12, nvidia-nvjitlink-cu12, nvidia-nccl-cu12, nvidia-curand-cu12, nvidia-cufft-cu12, nvidia-cuda-runtime-cu12, nvidia-cuda-nvrtc-cu12, nvidia-cuda-cupti-cu12, nvidia-cublas-cu12, numpy, networkx, MarkupSafe, lxml, joblib, itsdangerous, importlib-resources, idna, fsspec, filelock, click, charset-normalizer, certifi, cachelib, Babel, <span class="hljs-keyword">async</span>-timeout, werkzeug, triton, sacremoses, rich, requests, nvidia-cusparse-cu12, nvidia-cudnn-cu12, langdetect, Jinja2, deprecated, ctranslate2, beautifulsoup4, apscheduler, redis, nvidia-cusolver-cu12, limits, flask, torch, flask-swagger-ui, flask-swagger, flask-session, flask-limiter, flask-babel, stanza, argostranslate, translatehtml, argos-translate-files, libretranslate<br />Successfully installed Babel<span class="hljs-number">-2.16</span><span class="hljs-number">.0</span> Jinja2<span class="hljs-number">-3.1</span><span class="hljs-number">.4</span> MarkupSafe<span class="hljs-number">-3.0</span><span class="hljs-number">.1</span> PyYAML<span class="hljs-number">-6.0</span><span class="hljs-number">.2</span> appdirs<span class="hljs-number">-1.4</span><span class="hljs-number">.4</span> apscheduler<span class="hljs-number">-3.9</span><span class="hljs-number">.1</span> argos-translate-files<span class="hljs-number">-1.1</span><span class="hljs-number">.4</span> argostranslate<span class="hljs-number">-1.9</span><span class="hljs-number">.1</span> <span class="hljs-keyword">async</span>-timeout<span class="hljs-number">-4.0</span><span class="hljs-number">.3</span> beautifulsoup4<span class="hljs-number">-4.9</span><span class="hljs-number">.3</span> cachelib<span class="hljs-number">-0.13</span><span class="hljs-number">.0</span> certifi<span class="hljs-number">-2024.8</span><span class="hljs-number">.30</span> charset-normalizer<span class="hljs-number">-2.1</span><span class="hljs-number">.1</span> click<span class="hljs-number">-8.1</span><span class="hljs-number">.7</span> commonmark<span class="hljs-number">-0.9</span><span class="hljs-number">.1</span> ctranslate2<span class="hljs-number">-3.20</span><span class="hljs-number">.0</span> deprecated<span class="hljs-number">-1.2</span><span class="hljs-number">.14</span> expiringdict<span class="hljs-number">-1.2</span><span class="hljs-number">.2</span> filelock<span class="hljs-number">-3.16</span><span class="hljs-number">.1</span> flask<span class="hljs-number">-2.2</span><span class="hljs-number">.2</span> flask-babel<span class="hljs-number">-3.1</span><span class="hljs-number">.0</span> flask-limiter<span class="hljs-number">-2.6</span><span class="hljs-number">.3</span> flask-session<span class="hljs-number">-0.4</span><span class="hljs-number">.0</span> flask-swagger<span class="hljs-number">-0.2</span><span class="hljs-number">.14</span> flask-swagger-ui<span class="hljs-number">-4.11</span><span class="hljs-number">.1</span> fsspec<span class="hljs-number">-2024.9</span><span class="hljs-number">.0</span> idna<span class="hljs-number">-3.10</span> importlib-resources<span class="hljs-number">-6.4</span><span class="hljs-number">.5</span> itsdangerous<span class="hljs-number">-2.1</span><span class="hljs-number">.2</span> joblib<span class="hljs-number">-1.4</span><span class="hljs-number">.2</span> langdetect<span class="hljs-number">-1.0</span><span class="hljs-number">.9</span> lexilang<span class="hljs-number">-1.0</span><span class="hljs-number">.1</span> libretranslate<span class="hljs-number">-1.5</span><span class="hljs-number">.1</span> limits<span class="hljs-number">-3.13</span><span class="hljs-number">.0</span> lxml<span class="hljs-number">-5.3</span><span class="hljs-number">.0</span> morfessor<span class="hljs-number">-2.0</span><span class="hljs-number">.6</span> mpmath<span class="hljs-number">-1.3</span><span class="hljs-number">.0</span> networkx<span class="hljs-number">-3.4</span> numpy<span class="hljs-number">-2.1</span><span class="hljs-number">.2</span> nvidia-cublas-cu12<span class="hljs-number">-12.1</span><span class="hljs-number">.3</span><span class="hljs-number">.1</span> nvidia-cuda-cupti-cu12<span class="hljs-number">-12.1</span><span class="hljs-number">.105</span> nvidia-cuda-nvrtc-cu12<span class="hljs-number">-12.1</span><span class="hljs-number">.105</span> nvidia-cuda-runtime-cu12<span class="hljs-number">-12.1</span><span class="hljs-number">.105</span> nvidia-cudnn-cu12<span class="hljs-number">-9.1</span><span class="hljs-number">.0</span><span class="hljs-number">.70</span> nvidia-cufft-cu12<span class="hljs-number">-11.0</span><span class="hljs-number">.2</span><span class="hljs-number">.54</span> nvidia-curand-cu12<span class="hljs-number">-10.3</span><span class="hljs-number">.2</span><span class="hljs-number">.106</span> nvidia-cusolver-cu12<span class="hljs-number">-11.4</span><span class="hljs-number">.5</span><span class="hljs-number">.107</span> nvidia-cusparse-cu12<span class="hljs-number">-12.1</span><span class="hljs-number">.0</span><span class="hljs-number">.106</span> nvidia-nccl-cu12<span class="hljs-number">-2.20</span><span class="hljs-number">.5</span> nvidia-nvjitlink-cu12<span class="hljs-number">-12.6</span><span class="hljs-number">.77</span> nvidia-nvtx-cu12<span class="hljs-number">-12.1</span><span class="hljs-number">.105</span> packaging<span class="hljs-number">-23.1</span> polib<span class="hljs-number">-1.1</span><span class="hljs-number">.1</span> prometheus-client<span class="hljs-number">-0.15</span><span class="hljs-number">.0</span> protobuf<span class="hljs-number">-5.28</span><span class="hljs-number">.2</span> pygments<span class="hljs-number">-2.18</span><span class="hljs-number">.0</span> pytz<span class="hljs-number">-2024.2</span> redis<span class="hljs-number">-4.3</span><span class="hljs-number">.4</span> regex<span class="hljs-number">-2024.9</span><span class="hljs-number">.11</span> requests<span class="hljs-number">-2.28</span><span class="hljs-number">.1</span> rich<span class="hljs-number">-12.6</span><span class="hljs-number">.0</span> sacremoses<span class="hljs-number">-0.0</span><span class="hljs-number">.53</span> sentencepiece<span class="hljs-number">-0.1</span><span class="hljs-number">.99</span> setuptools<span class="hljs-number">-75.1</span><span class="hljs-number">.0</span> six<span class="hljs-number">-1.16</span><span class="hljs-number">.0</span> soupsieve<span class="hljs-number">-2.6</span> stanza<span class="hljs-number">-1.1</span><span class="hljs-number">.1</span> sympy<span class="hljs-number">-1.13</span><span class="hljs-number">.3</span> torch<span class="hljs-number">-2.4</span><span class="hljs-number">.1</span> tqdm<span class="hljs-number">-4.66</span><span class="hljs-number">.5</span> translatehtml<span class="hljs-number">-1.5</span><span class="hljs-number">.2</span> triton<span class="hljs-number">-3.0</span><span class="hljs-number">.0</span> typing-extensions<span class="hljs-number">-4.12</span><span class="hljs-number">.2</span> tzlocal<span class="hljs-number">-5.2</span> urllib3<span class="hljs-number">-1.26</span><span class="hljs-number">.20</span> waitress<span class="hljs-number">-2.1</span><span class="hljs-number">.2</span> werkzeug<span class="hljs-number">-2.2</span><span class="hljs-number">.2</span> wrapt<span class="hljs-number">-1.16</span><span class="hljs-number">.0</span></span></pre><p name="25d4" id="25d4" class="graf graf--p graf-after--pre">If you like to have all languages installed, then run libretranslate without arguments:</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="scss" name="1e37" id="1e37" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">libretranslate<br /><br />Updating language models<br />Found <span class="hljs-number">92</span> models<br />Downloading Albanian → English (<span class="hljs-number">1.9</span>) ...<br />Downloading Arabic → English (<span class="hljs-number">1.0</span>) ...<br />Downloading Azerbaijani → English (<span class="hljs-number">1.5</span>) ...<br />Downloading Basque → English (<span class="hljs-number">1.9</span>) ...<br />Downloading Bengali → English (<span class="hljs-number">1.9</span>) ...<br />Downloading Bulgarian → English (<span class="hljs-number">1.9</span>) ...<br />Downloading Catalan → English (<span class="hljs-number">1.7</span>) ...<br />Downloading Chinese (traditional) → English (<span class="hljs-number">1.9</span>) ...<br />Downloading Chinese → English (<span class="hljs-number">1.9</span>) ...<br />Downloading Czech → English (<span class="hljs-number">1.9</span>) ...<br />Downloading Danish → English (<span class="hljs-number">1.3</span>) ...<br />Downloading Dutch → English (<span class="hljs-number">1.8</span>) ...<br />Downloading English → Albanian (<span class="hljs-number">1.9</span>) ...<br />Downloading English → Arabic (<span class="hljs-number">1.0</span>) ...<br />Downloading English → Azerbaijani (<span class="hljs-number">1.5</span>) ...<br />Downloading English → Basque (<span class="hljs-number">1.9</span>) ...<br />Downloading English → Bengali (<span class="hljs-number">1.9</span>) ...<br />Downloading English → Bulgarian (<span class="hljs-number">1.9</span>) ...<br />Downloading English → Catalan (<span class="hljs-number">1.9</span>) ...<br />Downloading English → Chinese (<span class="hljs-number">1.9</span>) ...<br />Downloading English → Chinese (traditional) (<span class="hljs-number">1.9</span>) ...<br />Downloading English → Czech (<span class="hljs-number">1.9</span>) ...<br />Downloading English → Danish (<span class="hljs-number">1.3</span>) ...<br />Downloading English → Dutch (<span class="hljs-number">1.8</span>) ...<br />Downloading English → Esperanto (<span class="hljs-number">1.5</span>) ...<br />Downloading English → Estonian (<span class="hljs-number">1.9</span>) ...<br />Downloading English → Finnish (<span class="hljs-number">1.5</span>) ...<br />Downloading English → French (<span class="hljs-number">1.9</span>) ...<br />Downloading English → Galician (<span class="hljs-number">1.9</span>) ...<br />Downloading English → German (<span class="hljs-number">1.0</span>) ...<br />Downloading English → Greek (<span class="hljs-number">1.9</span>) ...<br />Downloading English → Hebrew (<span class="hljs-number">1.5</span>) ...<br />Downloading English → Hindi (<span class="hljs-number">1.1</span>) ...<br />Downloading English → Hungarian (<span class="hljs-number">1.5</span>) ...<br />Downloading English → Indonesian (<span class="hljs-number">1.2</span>) ...<br />Downloading English → Irish (<span class="hljs-number">1.1</span>) ...<br />Downloading English → Italian (<span class="hljs-number">1.0</span>) ...<br />Downloading English → Japanese (<span class="hljs-number">1.1</span>) ...<br />Downloading English → Korean (<span class="hljs-number">1.1</span>) ...<br />Downloading English → Latvian (<span class="hljs-number">1.9</span>) ...<br />Downloading English → Lithuanian (<span class="hljs-number">1.9</span>) ...<br />Downloading English → Malay (<span class="hljs-number">1.9</span>) ...<br />Downloading English → Norwegian (<span class="hljs-number">1.9</span>) ...<br />Downloading English → Persian (<span class="hljs-number">1.5</span>) ...<br />Downloading English → Polish (<span class="hljs-number">1.9</span>) ...<br />Downloading English → Portuguese (<span class="hljs-number">1.0</span>) ...<br />Downloading English → Romanian (<span class="hljs-number">1.9</span>) ...<br />Downloading English → Russian (<span class="hljs-number">1.9</span>) ...<br />Downloading English → Slovak (<span class="hljs-number">1.5</span>) ...<br />Downloading English → Slovenian (<span class="hljs-number">1.9</span>) ...<br />Downloading English → Spanish (<span class="hljs-number">1.0</span>) ...<br />Downloading English → Swedish (<span class="hljs-number">1.5</span>) ...<br />Downloading English → Tagalog (<span class="hljs-number">1.9</span>) ...<br />Downloading English → Thai (<span class="hljs-number">1.9</span>) ...<br />Downloading English → Turkish (<span class="hljs-number">1.5</span>) ...<br />Downloading English → Ukranian (<span class="hljs-number">1.4</span>) ...<br />Downloading English → Urdu (<span class="hljs-number">1.9</span>) ...<br />Downloading Esperanto → English (<span class="hljs-number">1.5</span>) ...<br />Downloading Estonian → English (<span class="hljs-number">1.9</span>) ...<br />Downloading Finnish → English (<span class="hljs-number">1.5</span>) ...<br />Downloading French → English (<span class="hljs-number">1.9</span>) ...<br />Downloading Galician → English (<span class="hljs-number">1.9</span>) ...<br />Downloading German → English (<span class="hljs-number">1.0</span>) ...<br />Downloading Greek → English (<span class="hljs-number">1.9</span>) ...<br />Downloading Hebrew → English (<span class="hljs-number">1.5</span>) ...<br />Downloading Hindi → English (<span class="hljs-number">1.1</span>) ...<br />Downloading Hungarian → English (<span class="hljs-number">1.5</span>) ...<br />Downloading Indonesian → English (<span class="hljs-number">1.2</span>) ...<br />Downloading Irish → English (<span class="hljs-number">1.1</span>) ...<br />Downloading Italian → English (<span class="hljs-number">1.0</span>) ...<br />Downloading Japanese → English (<span class="hljs-number">1.1</span>) ..<br />....<br />Loaded support for <span class="hljs-number">46</span> languages (<span class="hljs-number">92</span> models total)!<br />Running on http://<span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span>:<span class="hljs-number">5000</span></span></pre><p name="13b1" id="13b1" class="graf graf--p graf-after--pre">As you can see, LibreTranslate is now running on localhost and listening on port 5000. Open your web browser and type <code class="markup--code markup--p-code">localhost:5000</code>. You should see the following page:</p><figure name="d9de" id="d9de" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*Q5233hm4b4TpAtIrs_YWaA.png" data-width="1376" data-height="961" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*Q5233hm4b4TpAtIrs_YWaA.png"><figcaption class="imageCaption">Libretranslate web page in your local computer</figcaption></figure><p name="889a" id="889a" class="graf graf--p graf-after--figure">You can also use LibreTranslate for document translation. Be sure to select the correct ‘Translate from’ language for the file you upload to LibreTranslate. Once the translation is complete, it will be saved in your Downloads folder.</p><figure name="7dcb" id="7dcb" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*IU_pKvF4R1MYkb8tw2ESuQ.png" data-width="1058" data-height="508" src="https://cdn-images-1.medium.com/max/800/1*IU_pKvF4R1MYkb8tw2ESuQ.png"><figcaption class="imageCaption">Translating file</figcaption></figure><h3 name="c4cc" id="c4cc" class="graf graf--h3 graf-after--figure">OpenWebUI settings for libretranslate</h3><p name="6d9c" id="6d9c" class="graf graf--p graf-after--h3">First, download and install <a href="https://openwebui.com/f/iamg30/multilanguage_libretranslate_action/" data-href="https://openwebui.com/f/iamg30/multilanguage_libretranslate_action/" class="markup--anchor markup--p-anchor" rel="nofollow noopener noopener" target="_blank">https://openwebui.com/f/iamg30/multilanguage_libretranslate_action/</a> Function.</p><p name="5912" id="5912" class="graf graf--p graf-after--p">Update the <code class="markup--code markup--p-code">UserValues</code> class (inheriting from <code class="markup--code markup--p-code">BaseModel</code>) to support your preferred languages. As an example, set the <code class="markup--code markup--p-code">TARGET_LANGUAGES</code> default value to <code class="markup--code markup--p-code">[&quot;fi&quot;]</code>.</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="cpp" name="365f" id="365f" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-function"><span class="hljs-keyword">class</span> <span class="hljs-title">UserValves</span><span class="hljs-params">(BaseModel)</span>:<br />        SOURCE_LANGUAGE: str =</span> <span class="hljs-built_in">Field</span>(<br />            <span class="hljs-keyword">default</span>=<span class="hljs-string">&quot;auto&quot;</span>,<br />            description=<span class="hljs-string">&quot;User-specific source language for assistant messages&quot;</span>,<br />        )<br />        TARGET_LANGUAGES: list[str] = <span class="hljs-built_in">Field</span>(<br />            <span class="hljs-keyword">default</span>=[<span class="hljs-string">&quot;fi&quot;</span>, <span class="hljs-string">&quot;sv&quot;</span>, <span class="hljs-string">&quot;es&quot;</span>],<br />            description=<span class="hljs-string">&quot;User-specific target languages for assistant messages&quot;</span>,<br />        )</span></pre><p name="6ed3" id="6ed3" class="graf graf--p graf-after--pre">Once installed, you should enable Function and then decide you you want it to be globally available for all models, or enable it model by model.</p><figure name="6d5d" id="6d5d" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*Nfi_OGMoKMAdVJO3iTDq1g.png" data-width="1644" data-height="582" src="https://cdn-images-1.medium.com/max/800/1*Nfi_OGMoKMAdVJO3iTDq1g.png"><figcaption class="imageCaption">Enbablind LibreTranslate globally</figcaption></figure><figure name="7d24" id="7d24" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*2f_-worFANc_e8Ig9snFlQ.png" data-width="486" data-height="141" src="https://cdn-images-1.medium.com/max/800/1*2f_-worFANc_e8Ig9snFlQ.png"><figcaption class="imageCaption">Enabling LibreTranslate by model</figcaption></figure><p name="64ce" id="64ce" class="graf graf--p graf-after--figure">If you use another port for the LibreTranslate backend, change the valve:</p><figure name="6de8" id="6de8" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*saqUYMA5trTUnMDSJbSz8Q.png" data-width="475" data-height="196" src="https://cdn-images-1.medium.com/max/800/1*saqUYMA5trTUnMDSJbSz8Q.png"></figure><p name="4aa3" id="4aa3" class="graf graf--p graf-after--figure">Now you can use button to translate responses to your defined languages:</p><figure name="7f8a" id="7f8a" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*jhWiYRW46TuSkRYqypzgIw.png" data-width="429" data-height="85" src="https://cdn-images-1.medium.com/max/800/1*jhWiYRW46TuSkRYqypzgIw.png"></figure><p name="bd88" id="bd88" class="graf graf--p graf-after--figure">Now, responses are translated into your chosen (or predefined) languages.</p><p name="ede4" id="ede4" class="graf graf--p graf-after--p">If you need to adjust the info label or add additional carriage returns (CR) to the response, consider modifying these lines within the function:</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="swift" name="3638" id="3638" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">content <span class="hljs-operator">=</span> <span class="hljs-string">&quot;<span class="hljs-subst">\n</span><span class="hljs-subst">\n</span>&quot;</span>.join(<br />            [<br />                f<span class="hljs-string">&quot;<span class="hljs-subst">\n</span> ----- Translated to: {target} language ----- <span class="hljs-subst">\n</span>&quot;</span><br />                <span class="hljs-operator">+</span> translate<br />                <span class="hljs-keyword">for</span> target, translate <span class="hljs-keyword">in</span> translations.items()<br />            ]<br />        )</span></pre><p name="401f" id="401f" class="graf graf--p graf-after--pre">Output will be like this:</p><blockquote name="00f4" id="00f4" class="graf graf--blockquote graf-after--p">LLM response in supported language</blockquote><blockquote name="41d6" id="41d6" class="graf graf--blockquote graf-after--blockquote">— — — Translated to: fi language — — —</blockquote><blockquote name="9a61" id="9a61" class="graf graf--blockquote graf-after--blockquote">Text in Finnish language</blockquote><p name="dcae" id="dcae" class="graf graf--p graf-after--blockquote graf--trailing"><strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">All translations are processed locally on your computer, enhancing security.</em></strong></p></div></div></section><section name="9f01" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="6a2d" id="6a2d" class="graf graf--h3 graf--leading">Example startup script</h3><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="bash" name="7582" id="7582" class="graf graf--pre graf-after--h3 graf--preV2"><span class="pre--content"><span class="hljs-meta">#!/bin/bash</span><br /><span class="hljs-built_in">cd</span> /opt/libre || <span class="hljs-built_in">exit</span><br /><span class="hljs-built_in">source</span> venv/bin/activate<br />libretranslate</span></pre><h3 name="22ad" id="22ad" class="graf graf--h3 graf-after--pre">Updating Libretranslate</h3><p name="9b52" id="9b52" class="graf graf--p graf-after--h3">Procedure:</p><ol class="postList"><li name="dd27" id="dd27" class="graf graf--li graf-after--p">Activate the venv</li><li name="6290" id="6290" class="graf graf--li graf-after--li">execute command pip install — upgrade libretranslate</li></ol><h3 name="1628" id="1628" class="graf graf--h3 graf-after--li">Updating translations</h3><ol class="postList"><li name="8902" id="8902" class="graf graf--li graf-after--h3">Activate the venv</li><li name="0320" id="0320" class="graf graf--li graf-after--li graf--trailing">execute command libretranslate — update_models</li></ol></div></div></section><section name="ecc8" class="section section--body section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="5544" id="5544" class="graf graf--h3 graf--leading">pip list after upgrades as of 21.01.2025:</h3><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="yaml" name="2b4a" id="2b4a" class="graf graf--pre graf-after--h3 graf--trailing graf--preV2"><span class="pre--content"><span class="hljs-string">Package</span>                  <span class="hljs-string">Version</span><br /><span class="hljs-string">------------------------</span> <span class="hljs-string">----------</span><br /><span class="hljs-string">appdirs</span>                  <span class="hljs-number">1.4</span><span class="hljs-number">.4</span><br /><span class="hljs-string">APScheduler</span>              <span class="hljs-number">3.9</span><span class="hljs-number">.1</span><br /><span class="hljs-string">argos-translate-files</span>    <span class="hljs-number">1.2</span><span class="hljs-number">.0</span><br /><span class="hljs-string">argostranslate</span>           <span class="hljs-number">1.9</span><span class="hljs-number">.6</span><br /><span class="hljs-string">async-timeout</span>            <span class="hljs-number">4.0</span><span class="hljs-number">.3</span><br /><span class="hljs-string">babel</span>                    <span class="hljs-number">2.16</span><span class="hljs-number">.0</span><br /><span class="hljs-string">beautifulsoup4</span>           <span class="hljs-number">4.9</span><span class="hljs-number">.3</span><br /><span class="hljs-string">cachelib</span>                 <span class="hljs-number">0.13</span><span class="hljs-number">.0</span><br /><span class="hljs-string">certifi</span>                  <span class="hljs-number">2024.8</span><span class="hljs-number">.30</span><br /><span class="hljs-string">charset-normalizer</span>       <span class="hljs-number">2.1</span><span class="hljs-number">.1</span><br /><span class="hljs-string">click</span>                    <span class="hljs-number">8.1</span><span class="hljs-number">.7</span><br /><span class="hljs-string">commonmark</span>               <span class="hljs-number">0.9</span><span class="hljs-number">.1</span><br /><span class="hljs-string">ctranslate2</span>              <span class="hljs-number">4.5</span><span class="hljs-number">.0</span><br /><span class="hljs-string">Deprecated</span>               <span class="hljs-number">1.2</span><span class="hljs-number">.14</span><br /><span class="hljs-string">emoji</span>                    <span class="hljs-number">2.14</span><span class="hljs-number">.1</span><br /><span class="hljs-string">expiringdict</span>             <span class="hljs-number">1.2</span><span class="hljs-number">.2</span><br /><span class="hljs-string">filelock</span>                 <span class="hljs-number">3.16</span><span class="hljs-number">.1</span><br /><span class="hljs-string">Flask</span>                    <span class="hljs-number">2.2</span><span class="hljs-number">.5</span><br /><span class="hljs-string">flask-babel</span>              <span class="hljs-number">3.1</span><span class="hljs-number">.0</span><br /><span class="hljs-string">Flask-Limiter</span>            <span class="hljs-number">2.6</span><span class="hljs-number">.3</span><br /><span class="hljs-string">Flask-Session</span>            <span class="hljs-number">0.4</span><span class="hljs-number">.0</span><br /><span class="hljs-string">flask-swagger</span>            <span class="hljs-number">0.2</span><span class="hljs-number">.14</span><br /><span class="hljs-string">flask-swagger-ui</span>         <span class="hljs-number">4.11</span><span class="hljs-number">.1</span><br /><span class="hljs-string">fsspec</span>                   <span class="hljs-number">2024.9</span><span class="hljs-number">.0</span><br /><span class="hljs-string">idna</span>                     <span class="hljs-number">3.10</span><br /><span class="hljs-string">importlib_resources</span>      <span class="hljs-number">6.4</span><span class="hljs-number">.5</span><br /><span class="hljs-string">itsdangerous</span>             <span class="hljs-number">2.1</span><span class="hljs-number">.2</span><br /><span class="hljs-string">Jinja2</span>                   <span class="hljs-number">3.1</span><span class="hljs-number">.4</span><br /><span class="hljs-string">joblib</span>                   <span class="hljs-number">1.4</span><span class="hljs-number">.2</span><br /><span class="hljs-string">langdetect</span>               <span class="hljs-number">1.0</span><span class="hljs-number">.9</span><br /><span class="hljs-string">LexiLang</span>                 <span class="hljs-number">1.0</span><span class="hljs-number">.4</span><br /><span class="hljs-string">libretranslate</span>           <span class="hljs-number">1.6</span><span class="hljs-number">.4</span><br /><span class="hljs-string">limits</span>                   <span class="hljs-number">3.13</span><span class="hljs-number">.0</span><br /><span class="hljs-string">lxml</span>                     <span class="hljs-number">5.3</span><span class="hljs-number">.0</span><br /><span class="hljs-string">MarkupSafe</span>               <span class="hljs-number">3.0</span><span class="hljs-number">.1</span><br /><span class="hljs-string">Morfessor</span>                <span class="hljs-number">2.0</span><span class="hljs-number">.6</span><br /><span class="hljs-string">mpmath</span>                   <span class="hljs-number">1.3</span><span class="hljs-number">.0</span><br /><span class="hljs-string">networkx</span>                 <span class="hljs-number">3.4</span><br /><span class="hljs-string">numpy</span>                    <span class="hljs-number">1.26</span><span class="hljs-number">.4</span><br /><span class="hljs-string">nvidia-cublas-cu12</span>       <span class="hljs-number">12.1</span><span class="hljs-number">.3</span><span class="hljs-number">.1</span><br /><span class="hljs-string">nvidia-cuda-cupti-cu12</span>   <span class="hljs-number">12.1</span><span class="hljs-number">.105</span><br /><span class="hljs-string">nvidia-cuda-nvrtc-cu12</span>   <span class="hljs-number">12.1</span><span class="hljs-number">.105</span><br /><span class="hljs-string">nvidia-cuda-runtime-cu12</span> <span class="hljs-number">12.1</span><span class="hljs-number">.105</span><br /><span class="hljs-string">nvidia-cudnn-cu12</span>        <span class="hljs-number">8.9</span><span class="hljs-number">.2</span><span class="hljs-number">.26</span><br /><span class="hljs-string">nvidia-cufft-cu12</span>        <span class="hljs-number">11.0</span><span class="hljs-number">.2</span><span class="hljs-number">.54</span><br /><span class="hljs-string">nvidia-curand-cu12</span>       <span class="hljs-number">10.3</span><span class="hljs-number">.2</span><span class="hljs-number">.106</span><br /><span class="hljs-string">nvidia-cusolver-cu12</span>     <span class="hljs-number">11.4</span><span class="hljs-number">.5</span><span class="hljs-number">.107</span><br /><span class="hljs-string">nvidia-cusparse-cu12</span>     <span class="hljs-number">12.1</span><span class="hljs-number">.0</span><span class="hljs-number">.106</span><br /><span class="hljs-string">nvidia-nccl-cu12</span>         <span class="hljs-number">2.19</span><span class="hljs-number">.3</span><br /><span class="hljs-string">nvidia-nvjitlink-cu12</span>    <span class="hljs-number">12.6</span><span class="hljs-number">.77</span><br /><span class="hljs-string">nvidia-nvtx-cu12</span>         <span class="hljs-number">12.1</span><span class="hljs-number">.105</span><br /><span class="hljs-string">packaging</span>                <span class="hljs-number">23.1</span><br /><span class="hljs-string">pip</span>                      <span class="hljs-number">24.0</span><br /><span class="hljs-string">polib</span>                    <span class="hljs-number">1.1</span><span class="hljs-number">.1</span><br /><span class="hljs-string">prometheus-client</span>        <span class="hljs-number">0.15</span><span class="hljs-number">.0</span><br /><span class="hljs-string">protobuf</span>                 <span class="hljs-number">5.28</span><span class="hljs-number">.2</span><br /><span class="hljs-string">Pygments</span>                 <span class="hljs-number">2.18</span><span class="hljs-number">.0</span><br /><span class="hljs-string">pytz</span>                     <span class="hljs-number">2024.2</span><br /><span class="hljs-string">PyYAML</span>                   <span class="hljs-number">6.0</span><span class="hljs-number">.2</span><br /><span class="hljs-string">redis</span>                    <span class="hljs-number">4.4</span><span class="hljs-number">.4</span><br /><span class="hljs-string">regex</span>                    <span class="hljs-number">2024.9</span><span class="hljs-number">.11</span><br /><span class="hljs-string">requests</span>                 <span class="hljs-number">2.31</span><span class="hljs-number">.0</span><br /><span class="hljs-string">rich</span>                     <span class="hljs-number">12.6</span><span class="hljs-number">.0</span><br /><span class="hljs-string">sacremoses</span>               <span class="hljs-number">0.0</span><span class="hljs-number">.53</span><br /><span class="hljs-string">sentencepiece</span>            <span class="hljs-number">0.2</span><span class="hljs-number">.0</span><br /><span class="hljs-string">setuptools</span>               <span class="hljs-number">75.1</span><span class="hljs-number">.0</span><br /><span class="hljs-string">six</span>                      <span class="hljs-number">1.16</span><span class="hljs-number">.0</span><br /><span class="hljs-string">soupsieve</span>                <span class="hljs-number">2.6</span><br /><span class="hljs-string">stanza</span>                   <span class="hljs-number">1.1</span><span class="hljs-number">.1</span><br /><span class="hljs-string">sympy</span>                    <span class="hljs-number">1.13</span><span class="hljs-number">.3</span><br /><span class="hljs-string">torch</span>                    <span class="hljs-number">2.2</span><span class="hljs-number">.0</span><br /><span class="hljs-string">tqdm</span>                     <span class="hljs-number">4.66</span><span class="hljs-number">.5</span><br /><span class="hljs-string">translatehtml</span>            <span class="hljs-number">1.5</span><span class="hljs-number">.2</span><br /><span class="hljs-string">triton</span>                   <span class="hljs-number">2.2</span><span class="hljs-number">.0</span><br /><span class="hljs-string">typing_extensions</span>        <span class="hljs-number">4.12</span><span class="hljs-number">.2</span><br /><span class="hljs-string">tzlocal</span>                  <span class="hljs-number">5.2</span><br /><span class="hljs-string">urllib3</span>                  <span class="hljs-number">1.26</span><span class="hljs-number">.20</span><br /><span class="hljs-string">waitress</span>                 <span class="hljs-number">2.1</span><span class="hljs-number">.2</span><br /><span class="hljs-string">Werkzeug</span>                 <span class="hljs-number">2.3</span><span class="hljs-number">.8</span><br /><span class="hljs-string">wrapt</span>                    <span class="hljs-number">1.16</span><span class="hljs-number">.0</span></span></pre></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@jari.p.hiltunen" class="p-author h-card">Jari Hiltunen</a> on <a href="https://medium.com/p/6e80e25e73c0"><time class="dt-published" datetime="2024-10-11T13:31:32.900Z">October 11, 2024</time></a>.</p><p><a href="https://medium.com/@jari.p.hiltunen/how-to-install-libretranslate-and-use-it-with-openwebui-6e80e25e73c0" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on January 26, 2025.</p></footer></article></body></html>